from concurrent.futures import *
import time

from Ising import *

def main():

    start=time.time()   # Comienza a contar el tiempo de ejecución

    #---------------------------------------------------------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #--------------------------------------------INPUT--------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------

    list_Input = np.loadtxt('./Input/Input.csv', delimiter=',', usecols=(1,),dtype=np.float64)

    N = int(list_Input[0]) # Número de puntos de la red
    N_mover=int(list_Input[1])*N**2 # Número de veces que movemos antes de medir
    N_med=int(list_Input[2])   # Número de veces que medimos
    N_calentar=int(list_Input[3])*N**2  # Número de movimientos de calentamiento
    B = list_Input[4] # Campo externo (B=\mu H)
    pintar_intermedios = bool(int(list_Input[5])) # Variable que nos dice si pintar los pasos intermedios o no
    loop_T = int(list_Input[6]) # Cantidad de puntos en los que se ejecuta el loop de temperaturas
    temp_i = list_Input[7]
    temp_f = list_Input[8]
    una_temp = list_Input[9]

    #---------------------------------------------------------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #--------------------------------------------LOOP O ONE TEMP----------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------    

    if loop_T == 1:
        print("Se ha entrado en el caso de una sola temperatura.")
        One_Temp(N, N_calentar, N_med, N_mover, una_temp, B, pintar_intermedios)
    else:
        print("Se ha entrado en el caso de varias temperaturas.")
        Loop_Temp(N, N_calentar, N_med, N_mover, temp_i, temp_f, loop_T, B, pintar_intermedios)
    
    #---------------------------------------------------------------------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #--------------------------------------------------------FIN----------------------------------------------------------
    #---------------------------------------------------------------------------------------------------------------------
    #--------------------------------------------------------------------------------------------------------------------- 

    print("------------------------------------------------------------------")
    print("Duración de la simulación: ", time.time()-start, "segundos")
    print("------------------------------------------------------------------")
    print("MAGNETO")
    print("""              ⣀⣤⣴⣶⣶⣶⣶⣦⣤⣀⠀⠀⠀⠀⠀⠀
    ⠀⠀⠀⢀⣴⡿⢛⣿⣿⣿⣿⣿⣿⣿⣿⡛⢿⣦⡀⠀⠀⠀
    ⠀⠀⣰⣿⡟⠀⠀⣿⣿⠿⠛⠛⠿⣿⣿⠀⠀⢻⣿⣆⠀⠀
    ⠀⣰⣿⣿⣿⡀⠀⠹⣿⠀⠀⠀⠀⣿⠏⠀⢀⣿⣿⣿⣧⠀
    ⢠⣿⣿⣿⣿⣿⣦⣤⣘⣇⠀⠀⣸⣁⣤⣴⣿⣿⣿⣿⣿⡄
    ⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⠟⠛⠛⠻⣿⣿⣿⣿⠟⡛⠛⠻⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣇⠀⠚⠛⠓⠈⠛⠛⠁⠚⠛⠓⠀⣹⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⣷⣤⣤⣄⠀⠀⠀⠀⣠⣤⣤⣾⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⣿⣿⣿⣿⠿⠿⠿⠿⣿⣿⣿⣿⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⡇
    ⢸⣿⣿⣿⣿⣿⣿⣿⣿⣦⣤⣤⣴⣿⣿⣿⣿⣿⣿⣿⣿⡇
    ⠘⠻⠿⣿⣿⣿⣿⣿⣿⠛⠛⠛⠛⣿⣿⣿⣿⣿⣿⠿⠟⠃
    ⠀⠀⠀⠀⠀⠉⠉⠉⠁⠀⠀⠀⠀⠉⠋⠉⠉⠀⠀⠀⠀⠀""")


if __name__ == '__main__':
    main()